!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("leaflet")):"function"==typeof define&&define.amd?define(["leaflet"],e):"object"==typeof exports?exports.HBMap=e(require("leaflet")):t.HBMap=e(t.leaflet)}(this,function(t){return function(t){var e={};function i(n){if(e[n])return e[n].exports;var a=e[n]={i:n,l:!1,exports:{}};return t[n].call(a.exports,a,a.exports,i),a.l=!0,a.exports}return i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:n})},i.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=47)}([function(t,e,i){"use strict";function n(t,e,i,n,a,r,s,o){var d,l="function"==typeof t?t.options:t;if(e&&(l.render=e,l.staticRenderFns=i,l._compiled=!0),n&&(l.functional=!0),r&&(l._scopeId="data-v-"+r),s?(d=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),a&&a.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(s)},l._ssrRegister=d):a&&(d=o?function(){a.call(this,this.$root.$options.shadowRoot)}:a),d)if(l.functional){l._injectStyles=d;var u=l.render;l.render=function(t,e){return d.call(e),u(t,e)}}else{var h=l.beforeCreate;l.beforeCreate=h?[].concat(h,d):[d]}return{exports:t,options:l}}i.d(e,"a",function(){return n})},function(e,i){e.exports=t},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={inject:["mapCreateFn","getMap"],created:function(){var t=this.tagName.split("-")[2],e=this["create"+t[0].toUpperCase()+t.substring(1)];this.mapCreateFn.push(e)},beforeDestroy:function(){}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(1);e.default={props:{options:{type:Object},position:{type:Array}},watch:{options:function(t){n.Util.setOptions(this.getInstance(),t)}},methods:{getInstance:function(){return this.__map}}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"hb-street-view",render:function(t){return t("div",{},[t("div",{attrs:{id:"street-view"},style:{width:"100%",height:this.height}}),t("script",{attrs:{async:!0,class:"hb-street-view",src:"https://maps.google.cn/maps/api/js?key=AIzaSyDpfGZo2e8pDHGEFqQkwL-WGv33-YjMMY8&callback=$googleInitPanorama"}})])},props:{streetView:{type:Object,required:!0},height:{type:String,default:"200px"}},created:function(){var t=this;window.$googleInitPanorama=function(){new google.maps.StreetViewPanorama(document.getElementById("street-view"),{pano:"reception",visible:!0,zoom:20,panoProvider:t.getReceptionPanoramaData})}},methods:{getReceptionPanoramaData:function(){var t=this.streetView,e=t.tile_size,i=t.world_size,n=t.tile_url,a=t.thumb_url;return{tiles:{tileSize:new google.maps.Size(e[0],e[1]),worldSize:new google.maps.Size(i[0],i[1]),getTileUrl:function(t,e,i,r){return 0===e?a:n.replace("%x",i).replace("%y",r).replace("%z",e)}}}}}}},function(t,e,i){"use strict";i.r(e);var n=i(4),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);e.default=a.a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s(i(3)),a=s(i(2)),r=(i(29),i(1));function s(t){return t&&t.__esModule?t:{default:t}}e.default={name:"hb-map-popup",mixins:[n.default,a.default],data:function(){return{tagName:"hb-map-popup"}},props:{visible:{type:Boolean,default:!0}},beforeDestroy:function(){this.__map.removeFrom(this.getMap()),this.getMap().off("popupopen",this.handlePopupOpen),this.getMap().off("popupclose",this.handlePopupClose)},watch:{visible:function(t){var e=this;t?this.$nextTick(function(){e.__map.setContent(e.$el).openOn(e.getMap())}):this.getMap().closePopup()},position:function(t){t&&this.__map.setLatLng(t)&&this.__map.update()}},methods:{createPopup:function(){this.__map=(0,r.popup)(this.options),this.__map.setLatLng(this.position),this.$el&&this.__map.setContent(this.$el),this.visible&&this.__map.openOn(this.getMap()),this.options.event&&this.getMap().on("popupopen",this.handlePopupOpen),this.options.event&&this.getMap().on("popupclose",this.handlePopupClose)},handlePopupOpen:function(){this.$emit("open")},handlePopupClose:function(){this.$emit("close")}},render:function(t){return this.visible?t("div",this.$slots.default):null}}},function(t,e,i){"use strict";i.r(e);var n=i(6),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);e.default=a.a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s(i(3)),a=s(i(2)),r=i(1);function s(t){return t&&t.__esModule?t:{default:t}}e.default={name:"hb-map-polyline",mixins:[n.default,a.default],props:{visible:{type:Boolean,default:!0}},data:function(){return{tagName:"hb-map-polyline"}},watch:{visible:function(t){t?this.__map.addTo(this.getMap()):this.getMap().removeLayer(this.__map)},options:function(t){t&&this.__map&&this.__map.setStyle(t)},position:function(t){t.length>1&&this.__map.setLatLngs(t)}},methods:{createPolyline:function(){this.__map=(0,r.polyline)(this.position,this.options);var t=this.getMap();this.__map.addTo(t)}}}},function(t,e,i){"use strict";i.r(e);var n=i(8),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);e.default=a.a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s(i(3)),a=s(i(2)),r=i(1);function s(t){return t&&t.__esModule?t:{default:t}}e.default={name:"hb-map-polygon",mixins:[n.default,a.default],data:function(){return{tagName:"hb-map-polygon"}},beforeDestroy:function(){this.__map.remove()},methods:{createPolygon:function(){this.__map=(0,r.polygon)(this.position,this.options);var t=this.getMap();this.__map.addTo(t)}}}},function(t,e,i){"use strict";i.r(e);var n=i(10),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);e.default=a.a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},a=i(1),r=o(i(3)),s=o(i(2));function o(t){return t&&t.__esModule?t:{default:t}}e.default={name:"hb-map-marker",mixins:[r.default,s.default],data:function(){return{tagName:"hb-map-marker"}},props:{position:{type:Array,required:!0},angle:{type:Number},markercluster:{type:Boolean},visible:{type:Boolean,default:!0}},watch:{visible:function(t){t?this.__map.addTo(this.getMap()):this.close()},position:function(t){t&&this.__map.setLatLng(t)},"options.icon":function(t){this.__map.setIcon(t)}},updated:function(){!this.markercluster&&this.__map.setLatLng(this.position),a.Util.setOptions(this.__map,this.options)},beforeDestroy:function(){this.__map.off("click",this.handleClick),this.__map.remove()},methods:{handleClick:function(t){this.$emit("click",t,this)},createMarker:function(){this.__map=(0,a.marker)(this.position,n({},this.options)),this.visible&&!this.markercluster&&this.__map.addTo(this.getMap()),this.__map.on("click",this.handleClick)},close:function(){this.getMap().closePopup(this.__map)}}}},function(t,e,i){"use strict";i.r(e);var n=i(12),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);e.default=a.a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s(i(3)),a=s(i(2)),r=i(1);function s(t){return t&&t.__esModule?t:{default:t}}e.default={name:"hb-map-circle",mixins:[n.default,a.default],data:function(){return{tagName:"hb-map-circle"}},beforeDestroy:function(){this.__map.remove()},methods:{createCircle:function(){this.__map=(0,r.circle)(this.position,this.options);var t=this.getMap();this.__map.addTo(t)}}}},function(t,e,i){"use strict";i.r(e);var n=i(14),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);e.default=a.a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s(i(35)),a=s(i(3)),r=s(i(2));function s(t){return t&&t.__esModule?t:{default:t}}e.default={name:"hb-map-canvasmarker",data:function(){return{tagName:"hb-map-canvasmarker"}},mixins:[a.default,r.default],props:{markGroup:{type:Array}},beforeDestroy:function(){this.__map.remove()},watch:{markGroup:function(t){this.__map.replaceMarker(t)}},methods:{createCanvasmarker:function(){var t=this;this.__map=(0,n.default)(),this.__map.addTo(this.getMap()),this.markGroup&&this.markGroup.forEach(function(e){return t.__map.addMarker(e)})},redraw:function(t){this.__map&&this.__map._redraw(t)}}}},function(t,e,i){"use strict";i.r(e);var n=i(16),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);e.default=a.a},function(t,e,i){var n=i(39);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);(0,i(37).default)("54e95995",n,!1,{})},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,a=i(41),r=i(1),s=(n=r)&&n.__esModule?n:{default:n};var o=["m","t","p","s","y","h"];e.default={name:"hb-map",data:function(){return{tagName:"hb-map",createFn:[]}},props:{options:{type:Object},position:[Array,Boolean],zoom:{type:Number,default:12},mapId:{type:String},type:{type:String,default:"m"},locale:{type:String,default:"zh-cn"},height:{type:String,default:"0"},zoomControlPosition:{type:String,default:"topLeft"}},watch:{createFn:function(t){t.forEach(function(e,i){"function"==typeof e&&e(),t.splice(i,1)})},type:function(t){-1!==o.findIndex(function(e){return e===t})&&(this.__tileLayer.options.type=t,this.__tileLayer.redraw())}},provide:function(){return{mapCreateFn:this.createFn,getMap:this.getInstance}},mounted:function(){this.createMap()},beforeDestroy:function(){this.createFn.forEach(function(t){return null}),this.createFn=[],this.__map.off("zoomStart",this.handleMapZoomStart).off("moveStart",this.handleMapMoveStart).off("zoom",this.handleMapZoom).off("move",this.handleMapMove).off("zoomEnd",this.handleMapZoomEnd).off("moveEnd",this.handleMapMoveEnd).off("mouseover",this.handleMapMouseOver).off("mouseout",this.handleMapMouseOut),this.__map.remove()},methods:{getInstance:function(){return this.__map},createMap:function(){var t=this;t.__map=s.default.map(t.mapId,t.options),t.position?t.__map.fitBounds(t.position,{maxZoom:this.zoom}):t.__map.fitWorld(),t.__map.on("zoomstart",t.handleMapZoomStart).on("movestart",t.handleMapMoveStart).on("zoom",t.handleMapZoom).on("move",t.handleMapMove).on("zoomend",t.handleMapZoomEnd).on("moveend",t.handleMapMoveEnd).on("mouseover",t.handleMapMouseOver).on("mouseout",t.handleMapMouseOut),t.__tileLayer=s.default.tileLayer(a.TILE_URL,{type:t.type,locale:t.locale}).addTo(t.__map),t.__map.attributionControl.setPrefix("HB Map Svc")},handleMapZoomStart:function(t){this.$emit("zoom-start",t)},handleMapMoveStart:function(t){this.$emit("move-start",t)},handleMapZoom:function(t){this.$emit("zoom",t)},handleMapMove:function(t){this.$emit("move",t)},handleMapZoomEnd:function(t){this.$emit("zoom-end",t)},handleMapMoveEnd:function(t){this.$emit("move-end",t)},handleMapMouseOver:function(t){this.$emit("mouse-over",t)},handleMapMouseOut:function(t){this.$emit("mouse-out",t)}}}},function(t,e,i){"use strict";i.r(e);var n=i(19),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);e.default=a.a},function(t,e,i){"use strict";var n=function(){var t=this.$createElement;return(this._self._c||t)("div")},a=[];n._withStripped=!0,i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},function(t,e,i){"use strict";var n=function(){var t=this.$createElement;return(this._self._c||t)("div")},a=[];n._withStripped=!0,i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},function(t,e,i){"use strict";var n=function(){var t=this.$createElement;return(this._self._c||t)("div")},a=[];n._withStripped=!0,i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},function(t,e,i){"use strict";var n=function(){var t=this.$createElement;return(this._self._c||t)("div")},a=[];n._withStripped=!0,i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},function(t,e,i){"use strict";var n=function(){var t=this.$createElement;return(this._self._c||t)("div")},a=[];n._withStripped=!0,i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},function(t,e,i){"use strict";var n=function(){var t=this.$createElement;return(this._self._c||t)("div",{style:{height:this.height},attrs:{id:this.mapId}},[this._t("default")],2)},a=[];n._withStripped=!0,i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){for(var i=[],n={},a=0;a<e.length;a++){var r=e[a],s=r[0],o=r[1],d=r[2],l=r[3],u={id:t+":"+a,css:o,media:d,sourceMap:l};n[s]?n[s].parts.push(u):i.push(n[s]={id:s,parts:[u]})}return i}},function(t,e,i){"use strict";i.r(e);var n=i(5);for(var a in n)"default"!==a&&function(t){i.d(e,t,function(){return n[t]})}(a);var r=i(0),s=Object(r.a)(n.default,void 0,void 0,!1,null,null,null);s.options.__file="src/components/hb-street-view.vue",e.default=s.exports},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.translateVnode=function(t){var e=document.createElement.bind(document),i=document.createTextNode.bind(document);return function t(n){var a=n.tag?e(n.tag):"";if(n.children&&n.children.map(function(e){return t(e)}).forEach(function(t){a.appendChild(t)}),n.text)return i(n.text);if(n.data){if(n.data.attrs)for(var r in n.data.attrs)a.setAttribute(r,n.data.attrs[r]);if(n.data.staticClass&&(a.className=n.data.staticClass),n.data.staticStyle)for(var s in n.data.staticStyle)a.style[s]=n.data.staticStyle[s];return a}return a}(t)}},function(t,e,i){"use strict";i.r(e);var n=i(7);for(var a in n)"default"!==a&&function(t){i.d(e,t,function(){return n[t]})}(a);var r=i(0),s=Object(r.a)(n.default,void 0,void 0,!1,null,null,null);s.options.__file="src/components/hb-map-popup.vue",e.default=s.exports},function(t,e,i){"use strict";i.r(e);var n=i(25),a=i(9);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);var s=i(0),o=Object(s.a)(a.default,n.a,n.b,!1,null,null,null);o.options.__file="src/components/hb-map-polyline.vue",e.default=o.exports},function(t,e,i){"use strict";i.r(e);var n=i(21),a=i(11);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);var s=i(0),o=Object(s.a)(a.default,n.a,n.b,!1,null,null,null);o.options.__file="src/components/hb-map-polygon.vue",e.default=o.exports},function(t,e,i){"use strict";i.r(e);var n=i(22),a=i(13);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);var s=i(0),o=Object(s.a)(a.default,n.a,n.b,!1,null,null,null);o.options.__file="src/components/hb-map-marker.vue",e.default=o.exports},function(t,e,i){"use strict";i.r(e);var n=i(23),a=i(15);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);var s=i(0),o=Object(s.a)(a.default,n.a,n.b,!1,null,null,null);o.options.__file="src/components/hb-map-circle.vue",e.default=o.exports},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CanvasMarker=void 0;var n=i(1),a=e.CanvasMarker=n.Layer.extend({initialize:function(t,e){n.Util.setOptions(this,t)},addMarker:function(t){n.Util.stamp(t),this.markers||(this.markers=[]),this.markers.push(t),t.event&&(this.eventList||(this.eventList={}),this.eventList[t.event.type]||(this.eventList[t.event.type]=[]),this.eventList[t.event.type].push(t.event.eventFn)),this._drawMarker(t)},replaceMarker:function(t){this.markers=t,this._redraw()},onAdd:function(t,e){this._map=t,this._canvas||this._initCanvas(),this.options.pane?this.getPane().appendChild(this._canvas):t._panes.overlayPane.appendChild(this._canvas),t.on("moveend",this._reset,this)},onRemove:function(t){this.options.pane?this.getPane().removeChild(this._canvas):t.getPanes().overlayPane.removeChild(this._canvas)},addTo:function(t,e){return t.addLayer(this),this},_initEventList:function(){var t=this;this.markers.forEach(function(e){var i=e.event;for(var n in i)t.eventList[n]||(t.eventList[n]=[]),t.eventList[n].push[i[n]]}),Object.keys(this.eventList).forEach(function(e){t._canvas.addEventListener(e,function(i){t.eventList[e],forEach(function(t){"function"==typeof t&&t(i)})})})},_initCanvas:function(){this._canvas=n.DomUtil.create("canvas","hb-map-marker");var t=this._map.getSize(),e=t.x,i=t.y;return this._canvas.width=e,this._canvas.height=i,n.DomUtil.addClass(this._canvas,"leaflet-zoom-"+(this.options.zoomAnimation?"animated":"hide")),this},_drawMarker:function(t){var e=this._map.latLngToContainerPoint(t.position),i=this._canvas.getContext("2d");"function"==typeof t.render&&t.render(i,e)},_redraw:function(t){var e=this;if(!this._map)return!1;t&&(this._canvas.getContext("2d").clearRect(0,0,this._canvas.width,this._canvas.height),this.markers=null),this.markers&&this.markers.forEach(function(t){e._drawMarker(t)})},_reset:function(){if(!this._map)return!1;var t=this._map.containerPointToLayerPoint([0,0]);n.DomUtil.setPosition(this._canvas,t);var e=this._map.getSize();this._canvas.width=e.x,this._canvas.height=e.y,this._redraw()}});e.default=function(t){return new a(t)}},function(t,e,i){"use strict";i.r(e);var n=i(24),a=i(17);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);var s=i(0),o=Object(s.a)(a.default,n.a,n.b,!1,null,null,null);o.options.__file="src/components/hb-map-canvasmarker.vue",e.default=o.exports},function(t,e,i){"use strict";i.r(e),i.d(e,"default",function(){return g});var n=i(27),a=i.n(n),r="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!r)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var s={},o=r&&(document.head||document.getElementsByTagName("head")[0]),d=null,l=0,u=!1,h=function(){},c=null,f="data-vue-ssr-id",p="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function g(t,e,i,n){u=i,c=n||{};var r=a()(t,e);return _(r),function(e){for(var i=[],n=0;n<r.length;n++){var o=r[n];(d=s[o.id]).refs--,i.push(d)}e?_(r=a()(t,e)):r=[];for(n=0;n<i.length;n++){var d;if(0===(d=i[n]).refs){for(var l=0;l<d.parts.length;l++)d.parts[l]();delete s[d.id]}}}}function _(t){for(var e=0;e<t.length;e++){var i=t[e],n=s[i.id];if(n){n.refs++;for(var a=0;a<n.parts.length;a++)n.parts[a](i.parts[a]);for(;a<i.parts.length;a++)n.parts.push(v(i.parts[a]));n.parts.length>i.parts.length&&(n.parts.length=i.parts.length)}else{var r=[];for(a=0;a<i.parts.length;a++)r.push(v(i.parts[a]));s[i.id]={id:i.id,refs:1,parts:r}}}}function m(){var t=document.createElement("style");return t.type="text/css",o.appendChild(t),t}function v(t){var e,i,n=document.querySelector("style["+f+'~="'+t.id+'"]');if(n){if(u)return h;n.parentNode.removeChild(n)}if(p){var a=l++;n=d||(d=m()),e=M.bind(null,n,a,!1),i=M.bind(null,n,a,!0)}else n=m(),e=function(t,e){var i=e.css,n=e.media,a=e.sourceMap;n&&t.setAttribute("media",n);c.ssrId&&t.setAttribute(f,e.id);a&&(i+="\n/*# sourceURL="+a.sources[0]+" */",i+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(a))))+" */");if(t.styleSheet)t.styleSheet.cssText=i;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(i))}}.bind(null,n),i=function(){n.parentNode.removeChild(n)};return e(t),function(n){if(n){if(n.css===t.css&&n.media===t.media&&n.sourceMap===t.sourceMap)return;e(t=n)}else i()}}var w,L=(w=[],function(t,e){return w[t]=e,w.filter(Boolean).join("\n")});function M(t,e,i,n){var a=i?"":n.css;if(t.styleSheet)t.styleSheet.cssText=L(e,a);else{var r=document.createTextNode(a),s=t.childNodes;s[e]&&t.removeChild(s[e]),s.length?t.insertBefore(r,s[e]):t.appendChild(r)}}},function(t,e,i){"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map(function(e){var i=function(t,e){var i=t[1]||"",n=t[3];if(!n)return i;if(e&&"function"==typeof btoa){var a=(s=n,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(s))))+" */"),r=n.sources.map(function(t){return"/*# sourceURL="+n.sourceRoot+t+" */"});return[i].concat(r).concat([a]).join("\n")}var s;return[i].join("\n")}(e,t);return e[2]?"@media "+e[2]+"{"+i+"}":i}).join("")},e.i=function(t,i){"string"==typeof t&&(t=[[null,t,""]]);for(var n={},a=0;a<this.length;a++){var r=this[a][0];"number"==typeof r&&(n[r]=!0)}for(a=0;a<t.length;a++){var s=t[a];"number"==typeof s[0]&&n[s[0]]||(i&&!s[2]?s[2]=i:i&&(s[2]="("+s[2]+") and ("+i+")"),e.push(s))}},e}},function(t,e,i){(t.exports=i(38)(!1)).push([t.i,"\n#map[data-v-2cac90ce] {\n    width: 100%;\n    height: 100%;\n}\n",""])},function(t,e,i){"use strict";var n=i(18);i.n(n).a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.TILE_URL="http://webrd01.is.autonavi.com/appmaptile?lang=zh_cn&size=1&scale=1&style=8&x={x}&y={y}&z={z}"},function(t,e,i){"use strict";i.r(e);var n=i(26),a=i(20);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);i(40);var s=i(0),o=Object(s.a)(a.default,n.a,n.b,!1,null,"2cac90ce",null);o.options.__file="src/components/hb-map.vue",e.default=o.exports},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),(e.Editable=function(t){t.Editable=t.Evented.extend({statics:{FORWARD:1,BACKWARD:-1},options:{zIndex:1e3,polygonClass:t.Polygon,polylineClass:t.Polyline,markerClass:t.Marker,rectangleClass:t.Rectangle,circleClass:t.Circle,drawingCSSClass:"leaflet-editable-drawing",drawingCursor:"crosshair",editLayer:void 0,featuresLayer:void 0,polylineEditorClass:void 0,polygonEditorClass:void 0,markerEditorClass:void 0,rectangleEditorClass:void 0,circleEditorClass:void 0,lineGuideOptions:{},skipMiddleMarkers:!1},initialize:function(e,i){t.setOptions(this,i),this._lastZIndex=this.options.zIndex,this.map=e,this.editLayer=this.createEditLayer(),this.featuresLayer=this.createFeaturesLayer(),this.forwardLineGuide=this.createLineGuide(),this.backwardLineGuide=this.createLineGuide()},fireAndForward:function(t,e){(e=e||{}).editTools=this,this.fire(t,e),this.map.fire(t,e)},createLineGuide:function(){var e=t.extend({dashArray:"5,10",weight:1,interactive:!1},this.options.lineGuideOptions);return t.polyline([],e)},createVertexIcon:function(e){return t.Browser.touch?new t.Editable.TouchVertexIcon(e):new t.Editable.VertexIcon(e)},createEditLayer:function(){return this.options.editLayer||(new t.LayerGroup).addTo(this.map)},createFeaturesLayer:function(){return this.options.featuresLayer||(new t.LayerGroup).addTo(this.map)},moveForwardLineGuide:function(t){this.forwardLineGuide._latlngs.length&&(this.forwardLineGuide._latlngs[1]=t,this.forwardLineGuide._bounds.extend(t),this.forwardLineGuide.redraw())},moveBackwardLineGuide:function(t){this.backwardLineGuide._latlngs.length&&(this.backwardLineGuide._latlngs[1]=t,this.backwardLineGuide._bounds.extend(t),this.backwardLineGuide.redraw())},anchorForwardLineGuide:function(t){this.forwardLineGuide._latlngs[0]=t,this.forwardLineGuide._bounds.extend(t),this.forwardLineGuide.redraw()},anchorBackwardLineGuide:function(t){this.backwardLineGuide._latlngs[0]=t,this.backwardLineGuide._bounds.extend(t),this.backwardLineGuide.redraw()},attachForwardLineGuide:function(){this.editLayer.addLayer(this.forwardLineGuide)},attachBackwardLineGuide:function(){this.editLayer.addLayer(this.backwardLineGuide)},detachForwardLineGuide:function(){this.forwardLineGuide.setLatLngs([]),this.editLayer.removeLayer(this.forwardLineGuide)},detachBackwardLineGuide:function(){this.backwardLineGuide.setLatLngs([]),this.editLayer.removeLayer(this.backwardLineGuide)},blockEvents:function(){this._oldTargets||(this._oldTargets=this.map._targets,this.map._targets={})},unblockEvents:function(){this._oldTargets&&(this.map._targets=t.extend(this.map._targets,this._oldTargets),delete this._oldTargets)},registerForDrawing:function(e){this._drawingEditor&&this.unregisterForDrawing(this._drawingEditor),this.blockEvents(),e.reset(),this._drawingEditor=e,this.map.on("mousemove touchmove",e.onDrawingMouseMove,e),this.map.on("mousedown",this.onMousedown,this),this.map.on("mouseup",this.onMouseup,this),t.DomUtil.addClass(this.map._container,this.options.drawingCSSClass),this.defaultMapCursor=this.map._container.style.cursor,this.map._container.style.cursor=this.options.drawingCursor},unregisterForDrawing:function(e){this.unblockEvents(),t.DomUtil.removeClass(this.map._container,this.options.drawingCSSClass),this.map._container.style.cursor=this.defaultMapCursor,(e=e||this._drawingEditor)&&(this.map.off("mousemove touchmove",e.onDrawingMouseMove,e),this.map.off("mousedown",this.onMousedown,this),this.map.off("mouseup",this.onMouseup,this),e===this._drawingEditor&&(delete this._drawingEditor,e._drawing&&e.cancelDrawing()))},onMousedown:function(t){this._mouseDown=t,this._drawingEditor.onDrawingMouseDown(t)},onMouseup:function(e){if(this._mouseDown){var i=this._drawingEditor,n=this._mouseDown;if(this._mouseDown=null,i.onDrawingMouseUp(e),this._drawingEditor!==i)return;var a=t.point(n.originalEvent.clientX,n.originalEvent.clientY),r=t.point(e.originalEvent.clientX,e.originalEvent.clientY).distanceTo(a);Math.abs(r)<9*(window.devicePixelRatio||1)&&this._drawingEditor.onDrawingClick(e)}},drawing:function(){return this._drawingEditor&&this._drawingEditor.drawing()},stopDrawing:function(){this.unregisterForDrawing()},commitDrawing:function(t){this._drawingEditor&&this._drawingEditor.commitDrawing(t)},connectCreatedToMap:function(t){return this.featuresLayer.addLayer(t)},startPolyline:function(t,e){var i=this.createPolyline([],e);return i.enableEdit(this.map).newShape(t),i},startPolygon:function(t,e){var i=this.createPolygon([],e);return i.enableEdit(this.map).newShape(t),i},startMarker:function(t,e){t=t||this.map.getCenter().clone();var i=this.createMarker(t,e);return i.enableEdit(this.map).startDrawing(),i},startRectangle:function(e,i){var n=e||t.latLng([0,0]),a=new t.LatLngBounds(n,n),r=this.createRectangle(a,i);return r.enableEdit(this.map).startDrawing(),r},startCircle:function(t,e){t=t||this.map.getCenter().clone();var i=this.createCircle(t,e);return i.enableEdit(this.map).startDrawing(),i},startHole:function(t,e){t.newHole(e)},createLayer:function(e,i,n){var a=new e(i,n=t.Util.extend({editOptions:{editTools:this}},n));return this.fireAndForward("editable:created",{layer:a}),a},createPolyline:function(t,e){return this.createLayer(e&&e.polylineClass||this.options.polylineClass,t,e)},createPolygon:function(t,e){return this.createLayer(e&&e.polygonClass||this.options.polygonClass,t,e)},createMarker:function(t,e){return this.createLayer(e&&e.markerClass||this.options.markerClass,t,e)},createRectangle:function(t,e){return this.createLayer(e&&e.rectangleClass||this.options.rectangleClass,t,e)},createCircle:function(t,e){return this.createLayer(e&&e.circleClass||this.options.circleClass,t,e)}}),t.extend(t.Editable,{makeCancellable:function(t){t.cancel=function(){t._cancelled=!0}}}),t.Map.mergeOptions({editToolsClass:t.Editable,editable:!1,editOptions:{}}),t.Map.addInitHook(function(){this.whenReady(function(){this.options.editable&&(this.editTools=new this.options.editToolsClass(this,this.options.editOptions))})}),t.Editable.VertexIcon=t.DivIcon.extend({options:{iconSize:new t.Point(8,8)}}),t.Editable.TouchVertexIcon=t.Editable.VertexIcon.extend({options:{iconSize:new t.Point(20,20)}}),t.Editable.VertexMarker=t.Marker.extend({options:{draggable:!0,className:"leaflet-div-icon leaflet-vertex-icon"},initialize:function(e,i,n,a){this.latlng=e,this.latlngs=i,this.editor=n,t.Marker.prototype.initialize.call(this,e,a),this.options.icon=this.editor.tools.createVertexIcon({className:this.options.className}),this.latlng.__vertex=this,this.editor.editLayer.addLayer(this),this.setZIndexOffset(n.tools._lastZIndex+1)},onAdd:function(e){t.Marker.prototype.onAdd.call(this,e),this.on("drag",this.onDrag),this.on("dragstart",this.onDragStart),this.on("dragend",this.onDragEnd),this.on("mouseup",this.onMouseup),this.on("click",this.onClick),this.on("contextmenu",this.onContextMenu),this.on("mousedown touchstart",this.onMouseDown),this.addMiddleMarkers()},onRemove:function(e){this.middleMarker&&this.middleMarker.delete(),delete this.latlng.__vertex,this.off("drag",this.onDrag),this.off("dragstart",this.onDragStart),this.off("dragend",this.onDragEnd),this.off("mouseup",this.onMouseup),this.off("click",this.onClick),this.off("contextmenu",this.onContextMenu),this.off("mousedown touchstart",this.onMouseDown),t.Marker.prototype.onRemove.call(this,e)},onDrag:function(e){e.vertex=this,this.editor.onVertexMarkerDrag(e);var i=t.DomUtil.getPosition(this._icon),n=this._map.layerPointToLatLng(i);this.latlng.update(n),this._latlng=this.latlng,this.editor.refresh(),this.middleMarker&&this.middleMarker.updateLatLng();var a=this.getNext();a&&a.middleMarker&&a.middleMarker.updateLatLng()},onDragStart:function(t){t.vertex=this,this.editor.onVertexMarkerDragStart(t)},onDragEnd:function(t){t.vertex=this,this.editor.onVertexMarkerDragEnd(t)},onClick:function(t){t.vertex=this,this.editor.onVertexMarkerClick(t)},onMouseup:function(e){t.DomEvent.stop(e),e.vertex=this,this.editor.map.fire("mouseup",e)},onContextMenu:function(t){t.vertex=this,this.editor.onVertexMarkerContextMenu(t)},onMouseDown:function(t){t.vertex=this,this.editor.onVertexMarkerMouseDown(t)},delete:function(){var t=this.getNext();this.latlngs.splice(this.getIndex(),1),this.editor.editLayer.removeLayer(this),this.editor.onVertexDeleted({latlng:this.latlng,vertex:this}),this.latlngs.length||this.editor.deleteShape(this.latlngs),t&&t.resetMiddleMarker(),this.editor.refresh()},getIndex:function(){return this.latlngs.indexOf(this.latlng)},getLastIndex:function(){return this.latlngs.length-1},getPrevious:function(){if(!(this.latlngs.length<2)){var t=this.getIndex(),e=t-1;0===t&&this.editor.CLOSED&&(e=this.getLastIndex());var i=this.latlngs[e];return i?i.__vertex:void 0}},getNext:function(){if(!(this.latlngs.length<2)){var t=this.getIndex(),e=t+1;t===this.getLastIndex()&&this.editor.CLOSED&&(e=0);var i=this.latlngs[e];return i?i.__vertex:void 0}},addMiddleMarker:function(t){this.editor.hasMiddleMarkers()&&(t=t||this.getPrevious())&&!this.middleMarker&&(this.middleMarker=this.editor.addMiddleMarker(t,this,this.latlngs,this.editor))},addMiddleMarkers:function(){if(this.editor.hasMiddleMarkers()){var t=this.getPrevious();t&&this.addMiddleMarker(t);var e=this.getNext();e&&e.resetMiddleMarker()}},resetMiddleMarker:function(){this.middleMarker&&this.middleMarker.delete(),this.addMiddleMarker()},split:function(){this.editor.splitShape&&this.editor.splitShape(this.latlngs,this.getIndex())},continue:function(){if(this.editor.continueBackward){var t=this.getIndex();0===t?this.editor.continueBackward(this.latlngs):t===this.getLastIndex()&&this.editor.continueForward(this.latlngs)}}}),t.Editable.mergeOptions({vertexMarkerClass:t.Editable.VertexMarker}),t.Editable.MiddleMarker=t.Marker.extend({options:{opacity:.5,className:"leaflet-div-icon leaflet-middle-icon",draggable:!0},initialize:function(e,i,n,a,r){this.left=e,this.right=i,this.editor=a,this.latlngs=n,t.Marker.prototype.initialize.call(this,this.computeLatLng(),r),this._opacity=this.options.opacity,this.options.icon=this.editor.tools.createVertexIcon({className:this.options.className}),this.editor.editLayer.addLayer(this),this.setVisibility()},setVisibility:function(){var e=this._map.latLngToContainerPoint(this.left.latlng),i=this._map.latLngToContainerPoint(this.right.latlng),n=t.point(this.options.icon.options.iconSize);e.distanceTo(i)<3*n.x?this.hide():this.show()},show:function(){this.setOpacity(this._opacity)},hide:function(){this.setOpacity(0)},updateLatLng:function(){this.setLatLng(this.computeLatLng()),this.setVisibility()},computeLatLng:function(){var t=this.editor.map.latLngToContainerPoint(this.left.latlng),e=this.editor.map.latLngToContainerPoint(this.right.latlng),i=(t.y+e.y)/2,n=(t.x+e.x)/2;return this.editor.map.containerPointToLatLng([n,i])},onAdd:function(e){t.Marker.prototype.onAdd.call(this,e),t.DomEvent.on(this._icon,"mousedown touchstart",this.onMouseDown,this),e.on("zoomend",this.setVisibility,this)},onRemove:function(e){delete this.right.middleMarker,t.DomEvent.off(this._icon,"mousedown touchstart",this.onMouseDown,this),e.off("zoomend",this.setVisibility,this),t.Marker.prototype.onRemove.call(this,e)},onMouseDown:function(e){var i=t.DomUtil.getPosition(this._icon);if(e={originalEvent:e,latlng:this.editor.map.layerPointToLatLng(i)},0!==this.options.opacity&&(t.Editable.makeCancellable(e),this.editor.onMiddleMarkerMouseDown(e),!e._cancelled)){this.latlngs.splice(this.index(),0,e.latlng),this.editor.refresh();var n=this._icon,a=this.editor.addVertexMarker(e.latlng,this.latlngs);this.editor.onNewVertex(a);var r=a._icon.parentNode;r.removeChild(a._icon),a._icon=n,r.appendChild(a._icon),a._initIcon(),a._initInteraction(),a.setOpacity(1),t.Draggable._dragging=!1,a.dragging._draggable._onDown(e.originalEvent),this.delete()}},delete:function(){this.editor.editLayer.removeLayer(this)},index:function(){return this.latlngs.indexOf(this.right.latlng)}}),t.Editable.mergeOptions({middleMarkerClass:t.Editable.MiddleMarker}),t.Editable.BaseEditor=t.Handler.extend({initialize:function(e,i,n){t.setOptions(this,n),this.map=e,this.feature=i,this.feature.editor=this,this.editLayer=new t.LayerGroup,this.tools=this.options.editTools||e.editTools},addHooks:function(){this.isConnected()?this.onFeatureAdd():this.feature.once("add",this.onFeatureAdd,this),this.onEnable(),this.feature.on(this._getEvents(),this)},removeHooks:function(){this.feature.off(this._getEvents(),this),this.feature.dragging&&this.feature.dragging.disable(),this.editLayer.clearLayers(),this.tools.editLayer.removeLayer(this.editLayer),this.onDisable(),this._drawing&&this.cancelDrawing()},drawing:function(){return!!this._drawing},reset:function(){},onFeatureAdd:function(){this.tools.editLayer.addLayer(this.editLayer),this.feature.dragging&&this.feature.dragging.enable()},hasMiddleMarkers:function(){return!this.options.skipMiddleMarkers&&!this.tools.options.skipMiddleMarkers},fireAndForward:function(t,e){(e=e||{}).layer=this.feature,this.feature.fire(t,e),this.tools.fireAndForward(t,e)},onEnable:function(){this.fireAndForward("editable:enable")},onDisable:function(){this.fireAndForward("editable:disable")},onEditing:function(){this.fireAndForward("editable:editing")},onStartDrawing:function(){this.fireAndForward("editable:drawing:start")},onEndDrawing:function(){this.fireAndForward("editable:drawing:end")},onCancelDrawing:function(){this.fireAndForward("editable:drawing:cancel")},onCommitDrawing:function(t){this.fireAndForward("editable:drawing:commit",t)},onDrawingMouseDown:function(t){this.fireAndForward("editable:drawing:mousedown",t)},onDrawingMouseUp:function(t){this.fireAndForward("editable:drawing:mouseup",t)},startDrawing:function(){this._drawing||(this._drawing=t.Editable.FORWARD),this.tools.registerForDrawing(this),this.onStartDrawing()},commitDrawing:function(t){this.onCommitDrawing(t),this.endDrawing()},cancelDrawing:function(){t.Draggable._dragging=!1,this.onCancelDrawing(),this.endDrawing()},endDrawing:function(){this._drawing=!1,this.tools.unregisterForDrawing(this),this.onEndDrawing()},onDrawingClick:function(e){this.drawing()&&(t.Editable.makeCancellable(e),this.fireAndForward("editable:drawing:click",e),e._cancelled||(this.isConnected()||this.connect(e),this.processDrawingClick(e)))},isConnected:function(){return this.map.hasLayer(this.feature)},connect:function(t){this.tools.connectCreatedToMap(this.feature),this.tools.editLayer.addLayer(this.editLayer)},onMove:function(t){this.fireAndForward("editable:drawing:move",t)},onDrawingMouseMove:function(t){this.onMove(t)},_getEvents:function(){return{dragstart:this.onDragStart,drag:this.onDrag,dragend:this.onDragEnd,remove:this.disable}},onDragStart:function(t){this.onEditing(),this.fireAndForward("editable:dragstart",t)},onDrag:function(t){this.onMove(t),this.fireAndForward("editable:drag",t)},onDragEnd:function(t){this.fireAndForward("editable:dragend",t)}}),t.Editable.MarkerEditor=t.Editable.BaseEditor.extend({onDrawingMouseMove:function(e){t.Editable.BaseEditor.prototype.onDrawingMouseMove.call(this,e),this._drawing&&this.feature.setLatLng(e.latlng)},processDrawingClick:function(t){this.fireAndForward("editable:drawing:clicked",t),this.commitDrawing(t)},connect:function(e){e&&(this.feature._latlng=e.latlng),t.Editable.BaseEditor.prototype.connect.call(this,e)}}),t.Editable.PathEditor=t.Editable.BaseEditor.extend({CLOSED:!1,MIN_VERTEX:2,addHooks:function(){return t.Editable.BaseEditor.prototype.addHooks.call(this),this.feature&&this.initVertexMarkers(),this},initVertexMarkers:function(t){if(this.enabled())if(t=t||this.getLatLngs(),d(t))this.addVertexMarkers(t);else for(var e=0;e<t.length;e++)this.initVertexMarkers(t[e])},getLatLngs:function(){return this.feature.getLatLngs()},reset:function(){this.editLayer.clearLayers(),this.initVertexMarkers()},addVertexMarker:function(t,e){return new this.tools.options.vertexMarkerClass(t,e,this)},onNewVertex:function(t){this.fireAndForward("editable:vertex:new",{latlng:t.latlng,vertex:t})},addVertexMarkers:function(t){for(var e=0;e<t.length;e++)this.addVertexMarker(t[e],t)},refreshVertexMarkers:function(t){t=t||this.getDefaultLatLngs();for(var e=0;e<t.length;e++)t[e].__vertex.update()},addMiddleMarker:function(t,e,i){return new this.tools.options.middleMarkerClass(t,e,i,this)},onVertexMarkerClick:function(e){if(t.Editable.makeCancellable(e),this.fireAndForward("editable:vertex:click",e),!(e._cancelled||this.tools.drawing()&&this.tools._drawingEditor!==this)){var i,n=e.vertex.getIndex();e.originalEvent.ctrlKey?this.onVertexMarkerCtrlClick(e):e.originalEvent.altKey?this.onVertexMarkerAltClick(e):e.originalEvent.shiftKey?this.onVertexMarkerShiftClick(e):e.originalEvent.metaKey?this.onVertexMarkerMetaKeyClick(e):n===e.vertex.getLastIndex()&&this._drawing===t.Editable.FORWARD?n>=this.MIN_VERTEX-1&&(i=!0):0===n&&this._drawing===t.Editable.BACKWARD&&this._drawnLatLngs.length>=this.MIN_VERTEX?i=!0:0===n&&this._drawing===t.Editable.FORWARD&&this._drawnLatLngs.length>=this.MIN_VERTEX&&this.CLOSED?i=!0:this.onVertexRawMarkerClick(e),this.fireAndForward("editable:vertex:clicked",e),i&&this.commitDrawing(e)}},onVertexRawMarkerClick:function(t){this.fireAndForward("editable:vertex:rawclick",t),t._cancelled||this.vertexCanBeDeleted(t.vertex)&&t.vertex.delete()},vertexCanBeDeleted:function(t){return t.latlngs.length>this.MIN_VERTEX},onVertexDeleted:function(t){this.fireAndForward("editable:vertex:deleted",t)},onVertexMarkerCtrlClick:function(t){this.fireAndForward("editable:vertex:ctrlclick",t)},onVertexMarkerShiftClick:function(t){this.fireAndForward("editable:vertex:shiftclick",t)},onVertexMarkerMetaKeyClick:function(t){this.fireAndForward("editable:vertex:metakeyclick",t)},onVertexMarkerAltClick:function(t){this.fireAndForward("editable:vertex:altclick",t)},onVertexMarkerContextMenu:function(t){this.fireAndForward("editable:vertex:contextmenu",t)},onVertexMarkerMouseDown:function(t){this.fireAndForward("editable:vertex:mousedown",t)},onMiddleMarkerMouseDown:function(t){this.fireAndForward("editable:middlemarker:mousedown",t)},onVertexMarkerDrag:function(t){this.onMove(t),this.feature._bounds&&this.extendBounds(t),this.fireAndForward("editable:vertex:drag",t)},onVertexMarkerDragStart:function(t){this.fireAndForward("editable:vertex:dragstart",t)},onVertexMarkerDragEnd:function(t){this.fireAndForward("editable:vertex:dragend",t)},setDrawnLatLngs:function(t){this._drawnLatLngs=t||this.getDefaultLatLngs()},startDrawing:function(){this._drawnLatLngs||this.setDrawnLatLngs(),t.Editable.BaseEditor.prototype.startDrawing.call(this)},startDrawingForward:function(){this.startDrawing()},endDrawing:function(){this.tools.detachForwardLineGuide(),this.tools.detachBackwardLineGuide(),this._drawnLatLngs&&this._drawnLatLngs.length<this.MIN_VERTEX&&this.deleteShape(this._drawnLatLngs),t.Editable.BaseEditor.prototype.endDrawing.call(this),delete this._drawnLatLngs},addLatLng:function(e){this._drawing===t.Editable.FORWARD?this._drawnLatLngs.push(e):this._drawnLatLngs.unshift(e),this.feature._bounds.extend(e);var i=this.addVertexMarker(e,this._drawnLatLngs);this.onNewVertex(i),this.refresh()},newPointForward:function(t){this.addLatLng(t),this.tools.attachForwardLineGuide(),this.tools.anchorForwardLineGuide(t)},newPointBackward:function(t){this.addLatLng(t),this.tools.anchorBackwardLineGuide(t)},push:function(e){if(!e)return console.error("L.Editable.PathEditor.push expect a vaild latlng as parameter");this._drawing===t.Editable.FORWARD?this.newPointForward(e):this.newPointBackward(e)},removeLatLng:function(t){t.__vertex.delete(),this.refresh()},pop:function(){var e;if(!(this._drawnLatLngs.length<=1))return e=this._drawing===t.Editable.FORWARD?this._drawnLatLngs[this._drawnLatLngs.length-1]:this._drawnLatLngs[0],this.removeLatLng(e),this._drawing===t.Editable.FORWARD?this.tools.anchorForwardLineGuide(this._drawnLatLngs[this._drawnLatLngs.length-1]):this.tools.anchorForwardLineGuide(this._drawnLatLngs[0]),e},processDrawingClick:function(e){e.vertex&&e.vertex.editor===this||(this._drawing===t.Editable.FORWARD?this.newPointForward(e.latlng):this.newPointBackward(e.latlng),this.fireAndForward("editable:drawing:clicked",e))},onDrawingMouseMove:function(e){t.Editable.BaseEditor.prototype.onDrawingMouseMove.call(this,e),this._drawing&&(this.tools.moveForwardLineGuide(e.latlng),this.tools.moveBackwardLineGuide(e.latlng))},refresh:function(){this.feature.redraw(),this.onEditing()},newShape:function(t){var e=this.addNewEmptyShape();e&&(this.setDrawnLatLngs(e[0]||e),this.startDrawingForward(),this.fireAndForward("editable:shape:new",{shape:e}),t&&this.newPointForward(t))},deleteShape:function(e,i){var n={shape:e};if(t.Editable.makeCancellable(n),this.fireAndForward("editable:shape:delete",n),!n._cancelled)return e=this._deleteShape(e,i),this.ensureNotFlat&&this.ensureNotFlat(),this.feature.setLatLngs(this.getLatLngs()),this.refresh(),this.reset(),this.fireAndForward("editable:shape:deleted",{shape:e}),e},_deleteShape:function(t,e){if((e=e||this.getLatLngs()).length){var i=this,n=function(t,e){return t.splice(t.indexOf(e),1),t.length||i._deleteShape(t),e};if(e===t)return function(t,e){return t.splice(0,Number.MAX_VALUE)}(e);for(var a=0;a<e.length;a++){if(e[a]===t)return n(e,t);if(-1!==e[a].indexOf(t))return n(e[a],t)}}},deleteShapeAt:function(t){var e=this.feature.shapeAt(t);if(e)return this.deleteShape(e)},appendShape:function(t){this.insertShape(t)},prependShape:function(t){this.insertShape(t,0)},insertShape:function(t,e){this.ensureMulti(),t=this.formatShape(t),void 0===e&&(e=this.feature._latlngs.length),this.feature._latlngs.splice(e,0,t),this.feature.redraw(),this._enabled&&this.reset()},extendBounds:function(t){this.feature._bounds.extend(t.vertex.latlng)},onDragStart:function(e){this.editLayer.clearLayers(),t.Editable.BaseEditor.prototype.onDragStart.call(this,e)},onDragEnd:function(e){this.initVertexMarkers(),t.Editable.BaseEditor.prototype.onDragEnd.call(this,e)}}),t.Editable.PolylineEditor=t.Editable.PathEditor.extend({startDrawingBackward:function(){this._drawing=t.Editable.BACKWARD,this.startDrawing()},continueBackward:function(t){this.drawing()||(t=t||this.getDefaultLatLngs(),this.setDrawnLatLngs(t),t.length>0&&(this.tools.attachBackwardLineGuide(),this.tools.anchorBackwardLineGuide(t[0])),this.startDrawingBackward())},continueForward:function(t){this.drawing()||(t=t||this.getDefaultLatLngs(),this.setDrawnLatLngs(t),t.length>0&&(this.tools.attachForwardLineGuide(),this.tools.anchorForwardLineGuide(t[t.length-1])),this.startDrawingForward())},getDefaultLatLngs:function(e){return!(e=e||this.feature._latlngs).length||e[0]instanceof t.LatLng?e:this.getDefaultLatLngs(e[0])},ensureMulti:function(){this.feature._latlngs.length&&d(this.feature._latlngs)&&(this.feature._latlngs=[this.feature._latlngs])},addNewEmptyShape:function(){if(this.feature._latlngs.length){var t=[];return this.appendShape(t),t}return this.feature._latlngs},formatShape:function(t){return d(t)?t:t[0]?this.formatShape(t[0]):void 0},splitShape:function(e,i){if(i&&!(i>=e.length-1)){this.ensureMulti();var n=this.feature._latlngs.indexOf(e);if(-1!==n){var a=e.slice(0,i+1),r=e.slice(i);r[0]=t.latLng(r[0].lat,r[0].lng,r[0].alt),this.feature._latlngs.splice(n,1,a,r),this.refresh(),this.reset()}}}}),t.Editable.PolygonEditor=t.Editable.PathEditor.extend({CLOSED:!0,MIN_VERTEX:3,newPointForward:function(e){t.Editable.PathEditor.prototype.newPointForward.call(this,e),this.tools.backwardLineGuide._latlngs.length||this.tools.anchorBackwardLineGuide(e),2===this._drawnLatLngs.length&&this.tools.attachBackwardLineGuide()},addNewEmptyHole:function(t){this.ensureNotFlat();var e=this.feature.shapeAt(t);if(e){var i=[];return e.push(i),i}},newHole:function(t){var e=this.addNewEmptyHole(t);e&&(this.setDrawnLatLngs(e),this.startDrawingForward(),t&&this.newPointForward(t))},addNewEmptyShape:function(){if(this.feature._latlngs.length&&this.feature._latlngs[0].length){var t=[];return this.appendShape(t),t}return this.feature._latlngs},ensureMulti:function(){this.feature._latlngs.length&&d(this.feature._latlngs[0])&&(this.feature._latlngs=[this.feature._latlngs])},ensureNotFlat:function(){this.feature._latlngs.length&&!d(this.feature._latlngs)||(this.feature._latlngs=[this.feature._latlngs])},vertexCanBeDeleted:function(e){var i=this.feature.parentShape(e.latlngs);return t.Util.indexOf(i,e.latlngs)>0||t.Editable.PathEditor.prototype.vertexCanBeDeleted.call(this,e)},getDefaultLatLngs:function(){return this.feature._latlngs.length||this.feature._latlngs.push([]),this.feature._latlngs[0]},formatShape:function(t){return!d(t)||t[0]&&0===t[0].length?t:[t]}}),t.Editable.RectangleEditor=t.Editable.PathEditor.extend({CLOSED:!0,MIN_VERTEX:4,options:{skipMiddleMarkers:!0},extendBounds:function(e){var i=e.vertex.getIndex(),n=e.vertex.getNext(),a=e.vertex.getPrevious(),r=(i+2)%4,s=e.vertex.latlngs[r],o=new t.LatLngBounds(e.latlng,s);a.latlng.update([e.latlng.lat,s.lng]),n.latlng.update([s.lat,e.latlng.lng]),this.updateBounds(o),this.refreshVertexMarkers()},onDrawingMouseDown:function(e){t.Editable.PathEditor.prototype.onDrawingMouseDown.call(this,e),this.connect();var i=this.getDefaultLatLngs();3===i.length&&i.push(e.latlng);var n=new t.LatLngBounds(e.latlng,e.latlng);this.updateBounds(n),this.updateLatLngs(n),this.refresh(),this.reset(),e.originalEvent._simulated=!1,this.map.dragging._draggable._onUp(e.originalEvent),i[3].__vertex.dragging._draggable._onDown(e.originalEvent)},onDrawingMouseUp:function(e){this.commitDrawing(e),e.originalEvent._simulated=!1,t.Editable.PathEditor.prototype.onDrawingMouseUp.call(this,e)},onDrawingMouseMove:function(e){e.originalEvent._simulated=!1,t.Editable.PathEditor.prototype.onDrawingMouseMove.call(this,e)},getDefaultLatLngs:function(t){return t||this.feature._latlngs[0]},updateBounds:function(t){this.feature._bounds=t},updateLatLngs:function(t){for(var e=this.getDefaultLatLngs(),i=this.feature._boundsToLatLngs(t),n=0;n<e.length;n++)e[n].update(i[n])}}),t.Editable.CircleEditor=t.Editable.PathEditor.extend({MIN_VERTEX:2,options:{skipMiddleMarkers:!0},initialize:function(e,i,n){t.Editable.PathEditor.prototype.initialize.call(this,e,i,n),this._resizeLatLng=this.computeResizeLatLng()},computeResizeLatLng:function(){var t=(this.feature._radius||this.feature._mRadius)*Math.cos(Math.PI/4),e=this.map.project(this.feature._latlng);return this.map.unproject([e.x+t,e.y-t])},updateResizeLatLng:function(){this._resizeLatLng.update(this.computeResizeLatLng()),this._resizeLatLng.__vertex.update()},getLatLngs:function(){return[this.feature._latlng,this._resizeLatLng]},getDefaultLatLngs:function(){return this.getLatLngs()},onVertexMarkerDrag:function(e){1===e.vertex.getIndex()?this.resize(e):this.updateResizeLatLng(e),t.Editable.PathEditor.prototype.onVertexMarkerDrag.call(this,e)},resize:function(t){var e=this.feature._latlng.distanceTo(t.latlng);this.feature.setRadius(e)},onDrawingMouseDown:function(e){t.Editable.PathEditor.prototype.onDrawingMouseDown.call(this,e),this._resizeLatLng.update(e.latlng),this.feature._latlng.update(e.latlng),this.connect(),e.originalEvent._simulated=!1,this.map.dragging._draggable._onUp(e.originalEvent),this._resizeLatLng.__vertex.dragging._draggable._onDown(e.originalEvent)},onDrawingMouseUp:function(e){this.commitDrawing(e),e.originalEvent._simulated=!1,t.Editable.PathEditor.prototype.onDrawingMouseUp.call(this,e)},onDrawingMouseMove:function(e){e.originalEvent._simulated=!1,t.Editable.PathEditor.prototype.onDrawingMouseMove.call(this,e)},onDrag:function(e){t.Editable.PathEditor.prototype.onDrag.call(this,e),this.feature.dragging.updateLatLng(this._resizeLatLng)}});var e={createEditor:function(t){t=t||this._map;var e=(this.options.editOptions||{}).editTools||t.editTools;if(!e)throw Error("Unable to detect Editable instance.");return new(this.options.editorClass||this.getEditorClass(e))(t,this,this.options.editOptions)},enableEdit:function(t){return this.editor||this.createEditor(t),this.editor.enable(),this.editor},editEnabled:function(){return this.editor&&this.editor.enabled()},disableEdit:function(){this.editor&&(this.editor.disable(),delete this.editor)},toggleEdit:function(){this.editEnabled()?this.disableEdit():this.enableEdit()},_onEditableAdd:function(){this.editor&&this.enableEdit()}},i={getEditorClass:function(e){return e&&e.options.polylineEditorClass?e.options.polylineEditorClass:t.Editable.PolylineEditor},shapeAt:function(t,e){var i=null;if(!(e=e||this._latlngs).length)return i;if(d(e)&&this.isInLatLngs(t,e))i=e;else for(var n=0;n<e.length;n++)if(this.isInLatLngs(t,e[n]))return e[n];return i},isInLatLngs:function(e,i){if(!i)return!1;var n,a,r,s,o=[],d=this._clickTolerance();if(this._projectLatlngs(i,o,this._pxBounds),o=o[0],s=this._map.latLngToLayerPoint(e),!this._pxBounds.contains(s))return!1;for(n=1,r=o.length,a=0;n<r;a=n++)if(t.LineUtil.pointToSegmentDistance(s,o[a],o[n])<=d)return!0;return!1}},n={getEditorClass:function(e){return e&&e.options.polygonEditorClass?e.options.polygonEditorClass:t.Editable.PolygonEditor},shapeAt:function(t,e){var i=null;if(!(e=e||this._latlngs).length)return i;if(d(e)&&this.isInLatLngs(t,e))i=e;else if(d(e[0])&&this.isInLatLngs(t,e[0]))i=e;else for(var n=0;n<e.length;n++)if(this.isInLatLngs(t,e[n][0]))return e[n];return i},isInLatLngs:function(t,e){var i,n,a,r,s,o=!1;for(a=0,r=(s=e.length)-1;a<s;r=a++)i=e[a],n=e[r],i.lat>t.lat!=n.lat>t.lat&&t.lng<(n.lng-i.lng)*(t.lat-i.lat)/(n.lat-i.lat)+i.lng&&(o=!o);return o},parentShape:function(e,i){if(i=i||this._latlngs){var n=t.Util.indexOf(i,e);if(-1!==n)return i;for(var a=0;a<i.length;a++)if(-1!==(n=t.Util.indexOf(i[a],e)))return i[a]}}},a={getEditorClass:function(e){return e&&e.options.markerEditorClass?e.options.markerEditorClass:t.Editable.MarkerEditor}},r={getEditorClass:function(e){return e&&e.options.rectangleEditorClass?e.options.rectangleEditorClass:t.Editable.RectangleEditor}},s={getEditorClass:function(e){return e&&e.options.circleEditorClass?e.options.circleEditorClass:t.Editable.CircleEditor}},o=function(){this.on("add",this._onEditableAdd)},d=t.LineUtil.isFlat||t.LineUtil._flat||t.Polyline._flat;t.Polyline&&(t.Polyline.include(e),t.Polyline.include(i),t.Polyline.addInitHook(o)),t.Polygon&&(t.Polygon.include(e),t.Polygon.include(n)),t.Marker&&(t.Marker.include(e),t.Marker.include(a),t.Marker.addInitHook(o)),t.Rectangle&&(t.Rectangle.include(e),t.Rectangle.include(r)),t.Circle&&(t.Circle.include(e),t.Circle.include(s)),t.LatLng.prototype.update=function(e){e=t.latLng(e),this.lat=e.lat,this.lng=e.lng}})(window.L)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MovingMarker=void 0,e.movingMarker=function(t,e,i){return new r(t,e,i)};var a=n(1);var r=e.MovingMarker=a.Marker.extend({statics:{notStartedState:0,endedState:1,pausedState:2,runState:3},options:{autostart:!1,loop:!1},initialize:function(t,e,i){a.Marker.prototype.initialize.call(this,t[0],i),this._latlngs=t.map(function(t,e){return(0,a.latLng)(t)}),e instanceof Array?this._durations=e:this._durations=this._createDurations(this._latlngs,e),this._currentDuration=0,this._currentIndex=0,this._state=a.Marker.MovingMarker.notStartedState,this._startTime=0,this._startTimeStamp=0,this._pauseStartTime=0,this._animId=0,this._animRequested=!1,this._currentLine=[],this._stations={}},isRunning:function(){return this._state===a.Marker.MovingMarker.runState},isEnded:function(){return this._state===a.Marker.MovingMarker.endedState},isStarted:function(){return this._state!==a.Marker.MovingMarker.notStartedState},isPaused:function(){return this._state===a.Marker.MovingMarker.pausedState},start:function(){this.isRunning()||(this.isPaused()?this.resume():(this._loadLine(0),this._startAnimation(),this.fire("start")))},resume:function(){this.isPaused()&&(this._currentLine[0]=this.getLatLng(),this._currentDuration-=this._pauseStartTime-this._startTime,this._startAnimation())},pause:function(){this.isRunning()&&(this._pauseStartTime=Date.now(),this._state=a.Marker.MovingMarker.pausedState,this._stopAnimation(),this._updatePosition())},stop:function(t){this.isEnded()||(this._stopAnimation(),void 0===t&&(t=0,this._updatePosition()),this._state=a.Marker.MovingMarker.endedState,this.fire("end",{elapsedTime:t}))},addLatLng:function(t,e){this._latlngs.push((0,a.latLng)(t)),this._durations.push(e)},moveTo:function(t,e){this._stopAnimation(),this._latlngs=[this.getLatLng(),(0,a.latLng)(t)],this._durations=[e],this._state=a.Marker.MovingMarker.notStartedState,this.start(),this.options.loop=!1},addStation:function(t,e){t>this._latlngs.length-2||t<1||(this._stations[t]=e)},onAdd:function(t){a.Marker.prototype.onAdd.call(this,t),!this.options.autostart||this.isStarted()?this.isRunning()&&this._resumeAnimation():this.start()},onRemove:function(t){a.Marker.prototype.onRemove.call(this,t),this._stopAnimation()},_createDurations:function(t,e){for(var n=t.length-1,a=[],r=0,s=0,o=0;o<n;o++)s=t[o+1].distanceTo(t[o]),a.push(s),r+=s;var d=e/r,l=[];for(i=0;i<a.length;i++)l.push(a[i]*d);return l},_startAnimation:function(){this._state=a.Marker.MovingMarker.runState,this._animId=a.Util.requestAnimFrame(function(t){this._startTime=Date.now(),this._startTimeStamp=t,this._animate(t)},this,!0),this._animRequested=!0},_resumeAnimation:function(){this._animRequested||(this._animRequested=!0,this._animId=a.Util.requestAnimFrame(function(t){this._animate(t)},this,!0))},_stopAnimation:function(){this._animRequested&&(a.Util.cancelAnimFrame(this._animId),this._animRequested=!1)},_updatePosition:function(){var t=Date.now()-this._startTime;this._animate(this._startTimeStamp+t,!0)},_loadLine:function(t){this._currentIndex=t,this._currentDuration=this._durations[t],this._currentLine=this._latlngs.slice(t,t+2)},_updateLine:function(t){var e=t-this._startTimeStamp;if(e<=this._currentDuration)return e;for(var i=this._currentIndex,n=this._currentDuration,a=void 0;e>n;){if(e-=n,void 0!==(a=this._stations[i+1])){if(e<a)return this.setLatLng(this._latlngs[i+1]),null;e-=a}if(++i>=this._latlngs.length-1){if(!this.options.loop)return this.setLatLng(this._latlngs[this._latlngs.length-1]),this.stop(e),null;i=0,this.fire("loop",{elapsedTime:e})}n=this._durations[i]}return this._loadLine(i),this._startTimeStamp=t-e,this._startTime=Date.now()-e,e},_animate:function(t,e){this._animRequested=!1;var i=this._updateLine(t);if(!this.isEnded()){if(null!=i){var n=(r=this._currentLine[0],s=this._currentLine[1],o=this._currentDuration,d=(d=(d=i/o)>0?d:0)>1?1:d,(0,a.latLng)(r.lat+d*(s.lat-r.lat),r.lng+d*(s.lng-r.lng)));this.setLatLng(n)}var r,s,o,d;e||(this._animId=a.Util.requestAnimFrame(this._animate,this,!1),this._animRequested=!0)}}})},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DomMarkersIcon=void 0,e.domMarkersIcon=function(t){return new a(t)};var n=i(1),a=e.DomMarkersIcon=n.DivIcon.extend({options:{element:null},createIcon:function(){if(this.options.element){var t=this.options.element;return this._setIconStyles(t,"icon"),t}},createShadow:function(){return null}})},function(t,e,i){"use strict";var n=i(1),a=i(45),r=i(44);i(43);var s;s=n.Marker.prototype._setPos,n.Marker.include({_setPos:function(t){s.call(this,t),this.options.angle&&(this._icon.style[n.DomUtil.TRANSFORM]+="rotate("+this.options.angle+"deg)"),this.options.angleOrigin&&(this._icon.style[L.DomUtil.TRANSFORM+"Origin"]=this.options.angleOrigin)}}),window.L.Marker.MovingMarker=r.MovingMarker,window.L.Marker.movingMarker=r.movingMarker,window.L.DomMarkers={},window.L.DomMarkers.Icon=a.DomMarkersIcon,window.L.DomMarkers.icon=a.domMarkersIcon},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),i(46);var n=h(i(42)),a=h(i(36)),r=h(i(34)),s=h(i(33)),o=h(i(32)),d=h(i(31)),l=h(i(30)),u=h(i(28));function h(t){return t&&t.__esModule?t:{default:t}}var c=[n.default,a.default,r.default,s.default,o.default,d.default,l.default,u.default];e.default={install:function(t,e){c.forEach(function(e){t.component(e.name,e)})}}}])});